FROM archlinux:latest

RUN pacman -Syu --noconfirm && pacman -S --noconfirm \
    fish tmux git curl vim nodejs npm unzip \
    procps-ng iproute2 github-cli starship openssh \
    && pacman -Scc --noconfirm

# Bun
RUN curl -fsSL https://bun.sh/install | bash
ENV PATH="/root/.bun/bin:$PATH"

# Claude CLI
RUN npm install -g @anthropic-ai/claude-code

# Fisher + nvm.fish
RUN fish -c "curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher && fisher install jorgebucaran/nvm.fish"

# Default shell
RUN chsh -s /usr/bin/fish root

WORKDIR /workspace
CMD ["sleep", "infinity"]
